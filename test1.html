<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>MCAT Practice Quiz</title>
    <style>
      /* Reset & base */
      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }

      body {
        font-family: verdana, sans-serif;
        background: #ffffff;
        color: #222;
        line-height: 1.6;
      }

      /* Top bar */
      .top-bar {
        background-color: #016ecd;
        color: #fff;
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 10px 20px;
      }

      .top-bar-left .exam-title {
        font-size: 1.1rem;
        font-weight: bold;
      }

      .top-bar-right {
        display: flex;
        gap: 20px;
        font-size: 0.95rem;
      }

      /* Toolbar */
      .toolbar {
        background-color: #4e9affe1;
        border-bottom: 1px solid #ccc;
        padding: 8px 20px;
        display: flex;
        gap: 12px;
      }

      .toolbar .btn {
        background: transparent;
        border: 1px solid #aaa;
        border-radius: 4px;
        padding: 6px 12px;
        font-size: 0.9rem;
        cursor: pointer;
        color: #f1f1f1;
        font-family: Verdana, Geneva, Tahoma, sans-serif;
      }

      .toolbar .btn:hover {
        background: rgba(255, 255, 255, 0.2);
      }

      /* Main content area */
      .content {
        display: flex;
        width: 100%;
        padding-bottom: 80px;
      }

      /* Columns */
      .column {
        width: 50%;
        padding: 20px;
        overflow-y: auto;
      }

      .left-col {
        border-right: 1px solid #ccc;
        background: #fff;
      }

      .right-col {
        background: #fafafa;
      }

      /* Question pages - hide all by default */
      .question-page {
        display: none;
      }

      .question-page.active {
        display: block;
      }

      /* Passage section */
      .passage h2 {
        font-size: 1.2rem;
        margin-bottom: 12px;
      }

      .passage p {
        margin-bottom: 12px;
        line-height: 1.5;
      }

      /* Question block */
      .question-block {
        margin-top: 20px;
      }

      .question-header {
        margin-bottom: 8px;
      }

      .question-label {
        font-size: 1.15rem;
        font-weight: bold;
      }

      .question-text {
        margin-bottom: 16px;
        line-height: 1.4;
      }

      /* Options */
      .options {
        display: flex;
        flex-direction: column;
        gap: 10px;
      }

      .options label {
        display: flex;
        align-items: flex-start;
        border: 1px solid #ccc;
        padding: 10px 14px;
        border-radius: 5px;
        cursor: pointer;
        background: #fff;
        transition: background-color 0.2s, border-color 0.2s;
      }

      .options label:hover {
        background-color: #eef2ff;
        border-color: #8a9ae5;
      }

      .options input[type="radio"] {
        margin-right: 10px;
        margin-top: 3px;
      }

      /* Bottom navigation */
      .bottom-nav {
        position: fixed;
        bottom: 0;
        left: 0;
        right: 0;
        background: #016ecd;
        border-top: 1px solid #0056a3;
        padding: 12px 20px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        z-index: 1000;
        box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);
      }

      .nav-left,
      .nav-right {
        flex: 1;
      }

      .nav-center {
        flex: 1;
        text-align: center;
      }

      .question-info {
        color: white;
        font-size: 14px;
        font-weight: 500;
        font-family: Verdana, sans-serif;
      }

      .nav-btn {
        background: rgba(255, 255, 255, 0.2);
        border: 1px solid rgba(255, 255, 255, 0.3);
        color: white;
        padding: 8px 16px;
        border-radius: 6px;
        font-size: 14px;
        font-family: Verdana, sans-serif;
        font-weight: 500;
        cursor: pointer;
        display: flex;
        align-items: center;
        gap: 8px;
        transition: all 0.3s ease;
      }

      .nav-btn:hover:not(:disabled) {
        background: rgba(255, 255, 255, 0.3);
        transform: translateY(-1px);
      }

      .nav-btn:disabled {
        opacity: 0.4;
        cursor: not-allowed;
      }

      .next-btn {
        margin-left: auto;
      }

      .arrow {
        font-size: 16px;
        font-weight: bold;
      }

      /* Responsive */
      @media (max-width: 800px) {
        .content {
          flex-direction: column;
        }
        .column {
          width: 100%;
          border: none;
        }
        .left-col {
          border-bottom: 1px solid #ccc;
        }
      }
    </style>
  </head>
  <body>
    <div class="top-bar">
      <div class="top-bar-left">
        <span class="exam-title">MCAT © - Substitution Mechanisms</span>
      </div>
      <div class="top-bar-right">
        <span class="timer"
          >Question <span class="question-count">1</span> of 5</span
        >
      </div>
    </div>

    <!-- Add the buttons here: -->
    <div class="toolbar">
      <button class="btn highlight">Highlight</button>
      <button class="btn strikethrough">Strikethrough</button>
      <button class="btn flag">Flag for Review</button>
    </div>

    <!-- Question 1 -->
    <div class="question-page active" id="question-1">
      <div class="content">
        <div class="column left-col">
          <div class="passage">
            <h2>Passage 1 (Questions 1‑5)</h2>

            <img
              src="https://upload.wikimedia.org/wikipedia/commons/thumb/e/e7/SN1_Reaction_Mechanism.jpg/640px-SN1_Reaction_Mechanism.jpg"
              alt="SN1 Reaction Mechanism"
              style="width: 400px; display: block; margin: 0 auto"
            />
            <p><strong>Figure 1</strong></p>
            <br />
            <img
              src="https://upload.wikimedia.org/wikipedia/commons/thumb/b/b8/SN2_reaction.svg/640px-SN2_reaction.svg.png"
              alt="SN2 Reaction Mechanism"
              style="
                width: 400px;
                display: block;
                margin: 0 auto;
                filter: saturate(0);
              "
            />
            <p><strong>Figure 2</strong></p>
          </div>
        </div>
        <div class="column right-col">
          <div class="question-block">
            <div class="question-header">
              <span class="question-label">Question 1</span>
            </div>
            <div class="question-text">
              The nucleophile in figure 1 can best be described as:
              <span data-quiz="C" style="display: none">a weak base</span>
            </div>
            <div class="options">
              <label
                ><input type="radio" name="q1" value="A" /> A. a strong
                acid</label
              >
              <label
                ><input type="radio" name="q1" value="B" /> B. a weak
                acid</label
              >
              <label
                ><input type="radio" name="q1" value="C" /> C. a weak
                base</label
              >
              <label
                ><input type="radio" name="q1" value="D" /> D. a strong
                base</label
              >
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Question 2 -->
    <div class="question-page" id="question-2">
      <div class="content">
        <div class="column left-col">
          <div class="passage">
            <h2>Passage 1 (Questions 1‑5)</h2>
            <img
              src="https://upload.wikimedia.org/wikipedia/commons/thumb/e/e7/SN1_Reaction_Mechanism.jpg/640px-SN1_Reaction_Mechanism.jpg"
              alt="SN1 Reaction Mechanism"
              style="width: 400px; display: block; margin: 0 auto"
            />
            <p><strong>Figure 1</strong></p>
            <br />
            <img
              src="https://upload.wikimedia.org/wikipedia/commons/thumb/b/b8/SN2_reaction.svg/640px-SN2_reaction.svg.png"
              alt="SN2 Reaction Mechanism"
              style="
                width: 400px;
                display: block;
                margin: 0 auto;
                filter: saturate(0);
              "
            />
            <p><strong>Figure 2</strong></p>
          </div>
        </div>
        <div class="column right-col">
          <div class="question-block">
            <div class="question-header">
              <span class="question-label">Question 2</span>
            </div>
            <div class="question-text">
              Which of the following best describes the mechanism shown in
              Figure 1?
              <span data-quiz="B" style="display: none">two-step process</span>
            </div>
            <div class="options">
              <label
                ><input type="radio" name="q2" value="A" /> A. one-step
                concerted process</label
              >
              <label
                ><input type="radio" name="q2" value="B" /> B. two-step process
                with carbocation intermediate</label
              >
              <label
                ><input type="radio" name="q2" value="C" /> C. three-step
                process with multiple intermediates</label
              >
              <label
                ><input type="radio" name="q2" value="D" /> D. reversible
                equilibrium process</label
              >
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Question 3 -->
    <div class="question-page" id="question-3">
      <div class="content">
        <div class="column left-col">
          <div class="passage">
            <h2>Passage 1 (Questions 1‑5)</h2>
            <img
              src="https://upload.wikimedia.org/wikipedia/commons/thumb/e/e7/SN1_Reaction_Mechanism.jpg/640px-SN1_Reaction_Mechanism.jpg"
              alt="SN1 Reaction Mechanism"
              style="width: 400px; display: block; margin: 0 auto"
            />
            <p><strong>Figure 1</strong></p>
            <br />
            <img
              src="https://upload.wikimedia.org/wikipedia/commons/thumb/b/b8/SN2_reaction.svg/640px-SN2_reaction.svg.png"
              alt="SN2 Reaction Mechanism"
              style="
                width: 400px;
                display: block;
                margin: 0 auto;
                filter: saturate(0);
              "
            />
            <p><strong>Figure 2</strong></p>
          </div>
        </div>
        <div class="column right-col">
          <div class="question-block">
            <div class="question-header">
              <span class="question-label">Question 3</span>
            </div>
            <div class="question-text">
              The rate law for an SN2 reaction would be:
              <span data-quiz="A" style="display: none"
                >Rate = k[substrate][nucleophile]</span
              >
            </div>
            <div class="options">
              <label
                ><input type="radio" name="q3" value="A" /> A. Rate =
                k[substrate][nucleophile]</label
              >
              <label
                ><input type="radio" name="q3" value="B" /> B. Rate =
                k[substrate]</label
              >
              <label
                ><input type="radio" name="q3" value="C" /> C. Rate =
                k[nucleophile]</label
              >
              <label
                ><input type="radio" name="q3" value="D" /> D. Rate =
                k[substrate]²</label
              >
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Question 4 -->
    <div class="question-page" id="question-4">
      <div class="content">
        <div class="column left-col">
          <div class="passage">
            <h2>Passage 1 (Questions 1‑5)</h2>
            <img
              src="https://upload.wikimedia.org/wikipedia/commons/thumb/e/e7/SN1_Reaction_Mechanism.jpg/640px-SN1_Reaction_Mechanism.jpg"
              alt="SN1 Reaction Mechanism"
              style="width: 400px; display: block; margin: 0 auto"
            />
            <p><strong>Figure 1</strong></p>
            <br />
            <img
              src="https://upload.wikimedia.org/wikipedia/commons/thumb/b/b8/SN2_reaction.svg/640px-SN2_reaction.svg.png"
              alt="SN2 Reaction Mechanism"
              style="
                width: 400px;
                display: block;
                margin: 0 auto;
                filter: saturate(0);
              "
            />
            <p><strong>Figure 2</strong></p>
          </div>
        </div>
        <div class="column right-col">
          <div class="question-block">
            <div class="question-header">
              <span class="question-label">Question 4</span>
            </div>
            <div class="question-text">
              What stereochemical outcome is expected for the reaction shown in
              figure 2?
              <span data-quiz="C" style="display: none"
                >inversion of configuration</span
              >
            </div>
            <div class="options">
              <label
                ><input type="radio" name="q4" value="A" /> A. retention of
                configuration</label
              >
              <label
                ><input type="radio" name="q4" value="B" /> B.
                racemization</label
              >
              <label
                ><input type="radio" name="q4" value="C" /> C. inversion of
                configuration</label
              >
              <label
                ><input type="radio" name="q4" value="D" /> D. no stereochemical
                change</label
              >
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Question 5 -->
    <div class="question-page" id="question-5">
      <div class="content">
        <div class="column left-col">
          <div class="passage">
            <h2>Passage 1 (Questions 1‑5)</h2>
            <img
              src="https://upload.wikimedia.org/wikipedia/commons/thumb/e/e7/SN1_Reaction_Mechanism.jpg/640px-SN1_Reaction_Mechanism.jpg"
              alt="SN1 Reaction Mechanism"
              style="width: 400px; display: block; margin: 0 auto"
            />
            <p><strong>Figure 1</strong></p>
            <br />
            <img
              src="https://upload.wikimedia.org/wikipedia/commons/thumb/b/b8/SN2_reaction.svg/640px-SN2_reaction.svg.png"
              alt="SN2 Reaction Mechanism"
              style="
                width: 400px;
                display: block;
                margin: 0 auto;
                filter: saturate(0);
              "
            />
            <p><strong>Figure 2</strong></p>
          </div>
        </div>
        <div class="column right-col">
          <div class="question-block">
            <div class="question-header">
              <span class="question-label">Question 5</span>
            </div>
            <div class="question-text">
              Which solvent would most favor an SN1 reaction?
              <span data-quiz="D" style="display: none">ethanol</span>
            </div>
            <div class="options">
              <label
                ><input type="radio" name="q5" value="A" /> A. dimethyl
                sulfoxide (DMSO)</label
              >
              <label
                ><input type="radio" name="q5" value="B" /> B. acetone</label
              >
              <label
                ><input type="radio" name="q5" value="C" /> C. diethyl
                ether</label
              >
              <label
                ><input type="radio" name="q5" value="D" /> D. ethanol</label
              >
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Bottom Navigation -->
    <div class="bottom-nav">
      <div class="nav-left">
        <button class="nav-btn prev-btn" id="prev-question" disabled>
          <span class="arrow">←</span>
          Previous
        </button>
      </div>
      <div class="nav-center">
        <span class="question-info">Question 1 of 5</span>
      </div>
      <div class="nav-right">
        <button class="nav-btn next-btn" id="next-question">
          Next
          <span class="arrow">→</span>
        </button>
      </div>
    </div>

    <script src="test.js"></script>
    <script>
      // Multi-page navigation within single HTML
      document.addEventListener("DOMContentLoaded", function () {
        const prevBtn = document.getElementById("prev-question");
        const nextBtn = document.getElementById("next-question");
        const questionInfo = document.querySelector(".question-info");
        const topQuestionCount = document.querySelector(".question-count");

        let currentQuestion = 1;
        const totalQuestions = 5;

        // Show specific question page
        function showQuestion(questionNum) {
          // Hide all questions
          document.querySelectorAll(".question-page").forEach((page) => {
            page.classList.remove("active");
          });

          // Show current question
          const currentPage = document.getElementById(
            `question-${questionNum}`
          );
          if (currentPage) {
            currentPage.classList.add("active");
          }

          // Update displays
          questionInfo.textContent = `Question ${questionNum} of ${totalQuestions}`;
          topQuestionCount.textContent = questionNum;

          // Update navigation buttons
          prevBtn.disabled = questionNum === 1;

          if (questionNum === totalQuestions) {
            nextBtn.innerHTML = 'Finish <span class="arrow">✓</span>';
          } else {
            nextBtn.innerHTML = 'Next <span class="arrow">→</span>';
          }

          console.log(`Showing question ${questionNum}`);
        }

        // Previous question
        prevBtn.addEventListener("click", function () {
          if (currentQuestion > 1) {
            currentQuestion--;
            showQuestion(currentQuestion);
          }
        });

        // Next question / Finish
        nextBtn.addEventListener("click", function () {
          if (currentQuestion < totalQuestions) {
            currentQuestion++;
            showQuestion(currentQuestion);
          } else {
            // Finish exam
            if (confirm("Are you sure you want to finish the exam?")) {
              showSimpleScore();
            }
          }
        });

        // Keyboard navigation
        document.addEventListener("keydown", function (e) {
          const target = e.target;
          if (target.tagName === "INPUT" || target.tagName === "TEXTAREA") {
            return; // Don't interfere with form inputs
          }

          if (e.key === "ArrowLeft" && !prevBtn.disabled) {
            e.preventDefault();
            prevBtn.click();
          } else if (e.key === "ArrowRight") {
            e.preventDefault();
            nextBtn.click();
          }
        });

        // Initialize first question
        showQuestion(1);

        console.log("Multi-page exam navigation loaded");
        console.log("Use arrow keys or buttons to navigate between questions");
      });

      // Simple highlighting functionality
      document.addEventListener("DOMContentLoaded", function () {
        let highlightMode = false;
        let strikethroughMode = false;
        let flagged = false;

        const highlightBtn = document.querySelector(".btn.highlight");
        const strikethroughBtn = document.querySelector(".btn.strikethrough");
        const flagBtn = document.querySelector(".btn.flag");

        // Only add event listeners if buttons exist
        if (highlightBtn) {
          highlightBtn.addEventListener("click", function () {
            highlightMode = !highlightMode;
            strikethroughMode = false;

            if (highlightMode) {
              this.style.background = "#ffeb3b";
              this.style.color = "#000";
              if (strikethroughBtn) {
                strikethroughBtn.style.background = "transparent";
                strikethroughBtn.style.color = "#f1f1f1";
              }
            } else {
              this.style.background = "transparent";
              this.style.color = "#f1f1f1";
            }
          });
        }

        if (strikethroughBtn) {
          strikethroughBtn.addEventListener("click", function () {
            strikethroughMode = !strikethroughMode;
            highlightMode = false;

            if (strikethroughMode) {
              this.style.background = "#f44336";
              this.style.color = "#fff";
              if (highlightBtn) {
                highlightBtn.style.background = "transparent";
                highlightBtn.style.color = "#f1f1f1";
              }
            } else {
              this.style.background = "transparent";
              this.style.color = "#f1f1f1";
            }
          });
        }

        if (flagBtn) {
          flagBtn.addEventListener("click", function () {
            flagged = !flagged;

            if (flagged) {
              this.style.background = "#ff5722";
              this.style.color = "#fff";
              this.textContent = "Flagged ⚑";
            } else {
              this.style.background = "transparent";
              this.style.color = "#f1f1f1";
              this.textContent = "Flag for Review";
            }
          });
        }

        // Toggle highlight mode
        highlightBtn.addEventListener("click", function () {
          highlightMode = !highlightMode;
          strikethroughMode = false;

          if (highlightMode) {
            this.style.background = "#ffeb3b";
            this.style.color = "#000";
            strikethroughBtn.style.background = "transparent";
            strikethroughBtn.style.color = "#f1f1f1";
          } else {
            this.style.background = "transparent";
            this.style.color = "#f1f1f1";
          }
        });

        // Toggle strikethrough mode
        strikethroughBtn.addEventListener("click", function () {
          strikethroughMode = !strikethroughMode;
          highlightMode = false;

          if (strikethroughMode) {
            this.style.background = "#f44336";
            this.style.color = "#fff";
            highlightBtn.style.background = "transparent";
            highlightBtn.style.color = "#f1f1f1";
          } else {
            this.style.background = "transparent";
            this.style.color = "#f1f1f1";
          }
        });

        // Toggle flag
        flagBtn.addEventListener("click", function () {
          flagged = !flagged;

          if (flagged) {
            this.style.background = "#ff5722";
            this.style.color = "#fff";
            this.textContent = "Flagged ⚑";
          } else {
            this.style.background = "transparent";
            this.style.color = "#f1f1f1";
            this.textContent = "Flag for Review";
          }
        });

        // Apply highlighting/strikethrough on text selection
        document.addEventListener("mouseup", function () {
          const selection = window.getSelection();
          const selectedText = selection.toString().trim();

          if (selectedText && (highlightMode || strikethroughMode)) {
            const range = selection.getRangeAt(0);
            const wrapper = document.createElement("span");

            if (highlightMode) {
              wrapper.style.backgroundColor = "#ffeb3b";
              wrapper.style.color = "#000";
              wrapper.style.padding = "1px 2px";
            } else if (strikethroughMode) {
              wrapper.style.textDecoration = "line-through";
              wrapper.style.color = "#999";
            }

            try {
              wrapper.appendChild(range.extractContents());
              range.insertNode(wrapper);
              selection.removeAllRanges();
            } catch (error) {
              console.log("Could not apply formatting to selected text");
            }
          }
        });
      });

      function showSimpleScore() {
        // Define totalQuestions within this function
        const totalQuestions = 5;

        // Collect answers
        const correctAnswers = {};
        let totalScore = 0;

        // Get correct answers from data-quiz attributes
        for (let i = 1; i <= totalQuestions; i++) {
          const questionPage = document.getElementById(`question-${i}`);
          const correctSpan = questionPage.querySelector("[data-quiz]");
          if (correctSpan) {
            correctAnswers[`q${i}`] = correctSpan.getAttribute("data-quiz");
          }
        }

        // Check user answers
        for (let i = 1; i <= totalQuestions; i++) {
          const selectedRadio = document.querySelector(
            `input[name="q${i}"]:checked`
          );
          if (
            selectedRadio &&
            selectedRadio.value === correctAnswers[`q${i}`]
          ) {
            totalScore++;
          }
        }

        // Calculate percentage
        const percentage = Math.round((totalScore / totalQuestions) * 100);

        // Hide all question pages
        document.querySelectorAll(".question-page").forEach((page) => {
          page.style.display = "none";
        });

        // Hide bottom navigation
        document.querySelector(".bottom-nav").style.display = "none";

        // Create score display
        const scoreDisplay = document.createElement("div");
        scoreDisplay.style.cssText = `
          display: flex;
          justify-content: center;
          align-items: center;
          min-height: 80vh;
          font-family: Verdana, sans-serif;
          background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
        `;

        scoreDisplay.innerHTML = `
          <div style="
            text-align: center;
            background: white;
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            max-width: 400px;
            width: 90%;
          ">
      
            
            <div style="
              font-size: 3rem;
              font-weight: bold;
              color: #333;
              margin: 20px 0;
            ">${percentage}%</div>
            
            <div style="
              font-size: 1.2rem;
              color: #666;
              margin-bottom: 30px;
            ">You scored ${totalScore} out of ${totalQuestions}</div>

            <a href="miledown_genchem.html" style="
              display: inline-block;
              padding: 10px 20px;
              background: #016ecd;
              color: white;
              border-radius: 5px;
              text-decoration: none;
              font-weight: 500;
              transition: background 0.3s ease;
            ">Back to Review</a>
          </div>
        `;

        // Add score display to body
        document.body.appendChild(scoreDisplay);

        console.log(`Score: ${percentage}% (${totalScore}/${totalQuestions})`);
      }
    </script>
  </body>
</html>
